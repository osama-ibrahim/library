<html>
    <body>
        <div class="api-result"></div>
        <script>
            var ajax = function(options) {
                var defaults = {
                    type: 'GET',
                    url: ''
                };

                for (var param in defaults) {
                    if (!options[param]) {
                        options[param] = defaults[param];
                    }
                }

                var xhr = new XMLHttpRequest();

                xhr.addEventListener('load', function() {
                    if (options.success) {
                        options.success(this.responseText);
                    }
                });

                xhr.open(options.type, options.url, true);

                xhr.setRequestHeader('Content-Type', 'application/json');
                
                xhr.send(options.data && JSON.stringify(options.data));

                return xhr;
            };

            var get = function(url, success) {
                return ajax({
                    type: 'GET',
                    url: url,
                    success: success
                });
            };

            get('/api/v1/books', function(resp) {
                document.querySelector('.api-result').innerHTML = ['<h1>GET /api/v1/books</h1>', '', '<pre><code>', resp, '</code></pre>'].join('\n');
            });
        </script>
    </body>
</html>
